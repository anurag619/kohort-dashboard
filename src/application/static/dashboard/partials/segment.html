
<style>
	.segment-container .list-group-item {
		padding: 10px 10px;
	}
	
	.segment-container .list-group-item .fa,
	.segment-container .list-group-item .glyphicon {
	display: inline-block;
		margin-right: 5px;
	}
	
	.segment-container .list-group>a {
		cursor: pointer;
	}
	
	.segment-container .stat {
	  text-align: center;
	  background: #fff;
	  border: 1px solid #e7e7e7;
	  border-radius: 100px;
	  width: 101px;
	  padding: 40px 0;
	  clear: both;
	  font-weight: bold;
	  margin: 0 auto;
	  display: block;
	}
	
	.segment-container .list-group-item.active,
	.segment-container .list-group-item.active:hover,
	.segment-container .list-group-item.active:focus {
		z-index: 2;
		color: #000;
		background-color: #ddd;
		border-color: #ddd;
		border-radius: 0;
		cursor: pointer;
	}
	
	.segment-container {
		 
		margin-top: -15px;
		padding-top: 15px;
		margin-bottom: 15px;
		border-bottom: 1px solid #e7e7e7;
	}
	
	.segment-container .list-group-item.active:after {
		content: '';
		position: absolute;
		left: 100%;
		top: 50%;
		margin-top: -13px;
		border-left: 0;
		border-bottom: 13px solid transparent;
		border-top: 13px solid transparent;
		border-left: 10px solid #ddd;
	}
	
	.segment-container .list-group-item.active {
		background: #ddd;
		color: #000;
	}
	
	.segment-item {
		display: inline-block;
		border: 1px solid #ccc;
		padding: 5px 10px 7px;
		border-radius: 2px;
		cursor: pointer;
	}
	
	.segment-container .btn-group .fa-circle{
		color: #eee;
	}	
	 
	.segments {
		padding-bottom: 15px;
	}
	
	.segment-form {
		background: #fafafa;
		padding-top: 15px;
		padding-bottom: 15px;
		box-shadow: 0px 0px 12px #ddd inset;
	}
	
	.segment-form .panel-body {
		position: relative;
	}
	
	.segment-form .panel-heading {
		padding: 7px;
	}
	
	.segment-form .panel {
		margin-bottom: 0;
	}
	
	.stat-container {
		position: absolute;
		right: 0;
		bottom: 0;
		top: 0;
		background: #fafafa;
		vertical-align: middle;
		border-left: 1px solid #e7e7e7;
		padding: 0;
	}
	
	.segment-container .list-group-item:first-child
	{
		border-radius: 0 0 0 0;
		border-top: 0px;
	}
	
		.segment-container .list-group-item:first-child {
		border-radius: 0 0 0 0;
		border-top: 0px;
	}
	
	.segment-container .list-group-item:last-child {
		border-bootom: 0px;
	}
	
	.segment-container .panel-body .segmemt-form .form-control{
		margin-right: 5px;
  
	}
	
	.segment-container .panel-body .segmemt-form .btn-group{
	margin-top: 5px;
	}
	
	
	.segment-container .btn-group.active .fa-circle{
		color: #428bca;
	}
	
	
	._or, ._and{
	font-size: 11px;
	font-weight: bold;
	color: #ccc;
		position: relative;
		padding: 7px 0 4px;
	}

	._and {
	  border-bottom: 1px solid #e7e7e7;
	  margin-bottom: 10px;
	}
	
	._and span {
	  position: absolute;
	  left: 0;
	  top: 4px;
	  background: #fff;
	  padding-right: 8px;
	}
	.segment-form .btn.disabled{
	background: #eee;
	}
	
	.segments .btn, .segments .btn:hover, .segments .btn:focus{
		border-color: #e7e7e7;
	}
	
	.stat-container p{
	margin-bottom: 20px;
	}
	
	.segments .btn-group{
		margin-right: 5px;	
	}
</style>
 
	<div class="hide segment-container col-lg-12 col-md-12 hide" ng-show='!segmentShow'>

		<div class="segments">

			<span class="btn-group btn-group-sm" ng-class="{'active': currentActiveSegment==segment.name}" >		 
				<button class="btn btn-default" ><i class="fa fa-circle"></i></button>
				<button class="btn btn-default" ng-click="editSegments(segment)"><i class="fa fa-pencil"></i></button>
			</span> 
			<button class="btn btn-default btn-sm" ng-click="initialize('showsegments')"> 
				 <i class="fa fa-plus"></i>
			</button>			
		</span>
		</div>
	</div>

	
<!--New Design-->
<div class="segment-container col-lg-12 col-md-12" ng-show='segmentShow'>

	<div class="row segment-form">
		<div class="col-lg-12 col-md-12">
			<div class="alert alert-danger" ng-show="show_error" id="success-alert">
				    Do you wish to save your segment? Click on the <strong>Cancel</strong> to go back.
			</div>
			<div class="panel panel-default panel-small">
				<div class="panel-heading">
					<div class=" segments-actions form-inline">

						<input ng-model="segment_name" type="text" class="form-control input-sm" placeholder="New Segment Name" required>


						<button class="btn btn-primary btn-sm" ng-disabled="i.operator=='operator'"ng-click="tempSegment(segment_name)">Save</button>

						<button ng-click="initialize('hidesegments')" class="btn btn-default btn-sm">Cancel</button>

						<button ng-show='del_seg' ng-click="initialize('delete')" class="btn btn-danger btn-sm">Delete</button>
					</div>
				</div>

				<div class="panel-body">

					<div class="col-lg-2 col-md-2">
						<div style="margin:-15px 0px -15px -30px"> 
							<span ng-repeat="item in items">
								

								<a class='list-group-item' ng-click="valuechange(item)" ng-class="{'active': segParentVal ==item}" data-toggle='tab'><i ng-class="getIcons(item)"></i>  {{item}} 
									<span class="badge">{{nmbRules[item]}}</span>
								</a>
								
							</span>
							
						</div>
					</div>

					<div class="col-lg-8 col-md-8">
						<div class="segmemt-form">
						   
						   <div class="alert alert-danger" ng-show="check_prev" id="fill-alert">
				    			Please fill in the details of the previous query before proceeding further</div>

							<div class="form-inline" ng-repeat="i in segCounter track by $index">
								


								<div ng-if="i.rule=='or' && $index!=0 " class="_or">OR</div>
								<div ng-if="i.rule=='and' && $index!=0 " class="_and"><span>AND</span></div>
								<!-- <div class="alert alert-danger" ng-show="prev_val">
								Please fill in the details of previous query first then proceed further
		                        </div> -->
								<span>{{i.label1}}</span>

								<select ng-hide="(i.parent=='Events' || i.parent=='Competitors' || i.parent=='Storage space'||i.parent=='App Version' || i.parent=='Crashes')"class="form-control input-sm"  ng-model="i.datavalues" ng-options="k for k in i.segmentparams"  ng-change="segmentChange(i.datavalues, i.id)" >

								</select>
								<span ng-show="(i.parent=='Events' || i.parent=='Competitors' || i.parent=='Storage space' || i.parent=='App Version' || i.parent=='Crashes')">{{i.parent}}</span>
								
								<span>{{i.label2}}</span>
								<!-- <span ng-show="operator_check" ng-model="i.operator" ng-repeat="p in i.numvals" ng-init="operator_val(p, i.id)">{{p}}</span> -->
							 
								<!-- ng-show="labelFuncop" -->
								<select  class="form-control input-sm" ng-show="i.numvals.length>1" ng-model="i.operator" ng-options="p for p in i.numvals" ng-change="operator_val(i.operator, i.id)">
									<option ng-show="int_seg" value="">Operator</option>

								</select>

								<input typeahead="item as item.name for item in value_query($viewValue, i.datavalues)| filter:$viewValue | limitTo:8" typeahead-min-length='1' placeholder="Value" id="value_name" name="segmentlist" ng-model="i.options" ng-blur="type_func(i.options,i.id)" typeahead-on-select='typeahead_func(i.options, i.id,i.label1,i.label2)' typeahead-input-formatter="formatLabel($model)" value="i.options" class="form-control input-sm"> 

								<!-- <input ng-model='i.options' typeahead="item for item in i.segmentList | filter:$viewValue" placeholder="Enter Values" name="segmentlist" type="text" ng-blur="createSegment(i.options, i.id) " class="form-control input-sm" /> -->

								<span>{{i.unit}}</span>
								
								<!-- <div class="pull-right btn-group" ng-repeat="i in segCounter track by $index">
								 	<div ng-if="i=1">
									  <button class="btn btn-default btn-xs" ng-click="decideSegments('or') ">OR</button>
									  <button class="btn btn-default btn-xs" ng-click="decideSegments('and')" >AND</button>
									</div>
									<div ng-if="i>1">
									  <button ng-click="deleteSeg(i.id)" class="btn btn-default btn-xs" ><i class="fa fa-close"></i></button>
									  <button class="btn btn-default btn-xs" ng-click="decideSegments('or') ">OR</button>
									  <button class="btn btn-default btn-xs" ng-click="decideSegments('and')" >AND</button>
									</div>
								</div>
								-->
								<div class="pull-right btn-group">

									<button ng-click="deleteSeg(i.id)" ng-show="currentSegment.length>0"class="btn btn-default btn-xs" ><i class="fa fa-close"></i></button>

									<button class="btn btn-default btn-xs" data-value='or' ng-click="decideSegments($event,i) ">OR</button>
									<button class="btn btn-default btn-xs" data-value='and' ng-click="decideSegments($event,i)" >AND</button>
								</div>
								</div> <!-- < $INDEX ENDS> -->
							    
						</div>

					</div>

					<div class="col-lg-2 col-md-2 text-center stat-container hide">
						 
						<h4>Summary</h4>
						
						<p>
						<span class="stat">
								{{total}}%
							</span>
							Users <br>
							{{total_users}}
							</p>
						<hr>
							
						<div class="col-lg-12 col-md-12">Uninstalls<br>
							<div class="progress">
  								<div class="progress-bar" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: {{uninstalls_per}}%;">{{uninstalls_per}}%</div>
							</div>
							<small>Toral Uninstalls - {{total_uninstalls}}</small>	
							
							
						 </div>
					</div>
				</div>
			</div>
		</div>
	</div>

<hr style="margin: 15px -35px -1px; border-top: 30px solid #e9eaed;">
</div>


<ui-view></ui-view>